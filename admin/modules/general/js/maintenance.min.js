function Maintenance(){this.address="../modules/general/maintenance/";this.action=""}
Maintenance.prototype.init=function(){$("#admin_general_optimize_database").click(function(){maintenance.action="optimize_database";admin.show(maintenance.address+"index",maintenance.mainScreen)});$("#admin_general_checkDatabase").click(function(){maintenance.action="check_database";admin.show(maintenance.address+"index",maintenance.mainScreen)});$("#admin_general_stats").click(function(){maintenance.action="stats";admin.show(maintenance.address+"index",maintenance.mainScreen)})};
Maintenance.prototype.mainScreen=function(){$("#maintenance_check_database_label").click(function(){maintenance.showPending("maintenance_check_database");setTimeout(function(){$.post(maintenance.address+"result",{action:"checkDatabase"},function(a){maintenance.checkResponse(a,"maintenance_check_database")})},750)});$("#maintenance_optimize_database_label").click(function(){maintenance.showPending("maintenance_optimize_database");setTimeout(function(){$.post(maintenance.address+"result",{action:"optimizeDatabase"},
function(a){maintenance.checkResponse(a,"maintenance_optimize_database")})},750)});$("#maintenance_clean_stats_label").click(function(){maintenance.showPending("maintenance_clean_stats");setTimeout(function(){$.post(maintenance.address+"result",{action:"cleanStats"},function(a){maintenance.checkResponse(a,"maintenance_clean_stats")})},750)});"check_database"==maintenance.action?$("#maintenance_check_database_label").trigger("click"):"optimize_database"==maintenance.action?$("#maintenance_optimize_database_label").trigger("click"):
"stats"==maintenance.action&&$("#maintenance_clean_stats_label").trigger("click")};Maintenance.prototype.checkResponse=function(a,b){1!=a?maintenance.showError(b):maintenance.showReady(b)};Maintenance.prototype.showReady=function(a){$("#"+a).removeClass("maintenancePending").removeClass("maintenanceError").addClass("maintenanceReady");$("#"+a).html(languageAdmin.maintenance_ready)};
Maintenance.prototype.showPending=function(a){$("#"+a).removeClass("maintenanceError").removeClass("maintenanceReady").addClass("maintenancePending");$("#"+a).html(languageAdmin.maintenance_pending)};Maintenance.prototype.showError=function(a){$("#"+a).removeClass("maintenancePending").removeClass("maintenanceReady").addClass("maintenanceError");$("#"+a).html(languageAdmin.maintenance_error)};var maintenance=new Maintenance;