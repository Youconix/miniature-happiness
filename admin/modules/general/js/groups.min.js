function Groups(){this.url="../modules/general/groups/"}Groups.prototype.init=function(){$("#groups tbody tr").each(function(){$(this).click(function(){var a=$(this).data("id");-1!=a&&admin.show(groups.url+"view?id="+a,groups.view)})});$("#groupAddButton").click(function(){admin.show(groups.url+"addScreen",groups.addScreen)});$("#admin_general_groups_add_group").click(function(){admin.show(groups.url+"addScreen",groups.addScreen)})};
Groups.prototype.view=function(){$("#group_user_list tr").each(function(){$(this).click(function(){var a=$(this).data("id");admin.show(users.url+"/view?userid="+a,users.showUserEvents)})});$("#groups_edit").click(function(){var a=$(this).data("id");groups.editAllowed(a)&&admin.show(groups.url+"getGroup?id="+a,groups.showGroup)});$("#groups_delete").click(function(){groups.deleteItem()});$("#users_back").click(function(){general.showGroups()})};
Groups.prototype.editAllowed=function(a){return 0==a||1==a?!1:!0};Groups.prototype.deleteItem=function(){var a=$("#groups_delete").data("id");groups.editAllowed(a)&&(a=$("#groups_delete").data("name"),confirmBox.init(150,groups.deleteConfirm),confirmBox.show(languageAdmin.groups_delete_title,languageAdmin.users_delete.replace("[name]",a)))};Groups.prototype.deleteConfirm=function(){var a=$("#groups_edit").data("id");$.post(groups.url+"delete",{id:a},function(){general.showGroups()})};
Groups.prototype.showGroup=function(){$("#users_back, #groupCancel").click(function(){general.showGroups()});$("#groups_delete").click(function(){groups.deleteItem()});$("#groupEditSave").click(function(){groups.edit()})};Groups.prototype.edit=function(){var a=groups.check();null!=a&&(a.id=$("#id").val(),$.post(groups.url+"edit",a,function(){general.showGroups()}))};Groups.prototype.addScreen=function(){$("#users_back, #groupCancel").click(function(){general.showGroups()});$("#groupSave").click(function(){groups.save()})};
Groups.prototype.save=function(){var a=groups.check();null!=a&&$.post(groups.url+"save",a,function(){general.showGroups()})};Groups.prototype.check=function(){if(!validation.html5ValidationArray(["name","description"]))return null;var a={name:$("#name").val(),description:$("#description").val(),defaultGroup:0};$("default_1").is(":checked")&&(a.defaultGroup=1);return a};var groups=new Groups;